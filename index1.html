<!DOCTYPE html>
<html>
<head>
<title>Pothole Detection</title>
</head>
<body>

<h2>Live Pothole Detection</h2>

<video id="video" autoplay playsinline></video>
<canvas id="canvas" style="display:none;"></canvas>
<img id="output">

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const output = document.getElementById("output");

const ws = new WebSocket("ws://YOUR_PC_IP:8000/ws");

navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => {
    video.srcObject = stream;
})
.catch(err => {
    alert("Camera permission denied!");
});

video.addEventListener("play", () => {
    setInterval(() => {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0);

        const data = canvas.toDataURL("image/jpeg");
        ws.send(data);
    }, 100);
});

ws.onmessage = (event) => {
    output.src = event.data;
};
</script>

</body>
</html>
